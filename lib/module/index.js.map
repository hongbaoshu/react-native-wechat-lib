{"version":3,"sources":["index.js"],"names":["DeviceEventEmitter","NativeModules","Platform","EventEmitter","isAppRegistered","WeChat","emitter","addListener","resp","emit","type","wrapRegisterApp","nativeFunc","undefined","args","Promise","resolve","reject","apply","error","result","Error","wrapApi","bind","once","removeAllListeners","registerApp","isWXAppInstalled","isWXAppSupportApi","getWXAppInstallUrl","getApiVersion","openWXApp","nativeShareToTimeline","shareToTimeline","nativeLaunchMiniProgram","launchMiniProgram","nativeShareToSession","shareToSession","nativeShareToFavorite","shareToFavorite","nativeSendAuthRequest","sendAuthRequest","nativeShareText","shareText","nativeShareImage","shareImage","nativeShareLocalImage","shareLocalImage","nativeShareMusic","shareMusic","nativeShareVideo","shareVideo","nativeShareWebpage","shareWebpage","nativeShareMiniProgram","shareMiniProgram","nativeSubscribeMessage","subscribeMessage","nativeChooseInvoice","chooseInvoice","nativeShareFile","shareFile","scopes","state","errCode","WechatError","data","scene","OS","cardItemList","JSON","parse","cards","map","item","cardId","card_id","encryptCode","encrypt_code","miniProgramType","userName","path","errStr","pay","correct","actual","fixed","timeStamp","String","constructor","message","toString","name","code","Object","setPrototypeOf","prototype","__proto__"],"mappings":"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","sourcesContent":["'use strict';\n\nimport { DeviceEventEmitter, NativeModules, Platform } from 'react-native';\nimport { EventEmitter } from 'events';\n\nlet isAppRegistered = false;\nconst { WeChat } = NativeModules;\n\n// Event emitter to dispatch request and response from WeChat.\nconst emitter = new EventEmitter();\n\nDeviceEventEmitter.addListener('WeChat_Resp', (resp) => {\n  emitter.emit(resp.type, resp);\n});\n\nDeviceEventEmitter.addListener('WeChat_Req', (resp) => {\n  emitter.emit(resp.type, resp);\n});\n\nfunction wrapRegisterApp(nativeFunc) {\n  if (!nativeFunc) {\n    return undefined;\n  }\n  return (...args) => {\n    if (isAppRegistered) {\n      return Promise.resolve(true);\n    }\n    isAppRegistered = true;\n    return new Promise((resolve, reject) => {\n      nativeFunc.apply(null, [\n        ...args,\n        (error, result) => {\n          if (!error) {\n            return resolve(result);\n          }\n          if (typeof error === 'string') {\n            return reject(new Error(error));\n          }\n          reject(error);\n        },\n      ]);\n    });\n  };\n}\n\nfunction wrapApi(nativeFunc) {\n  if (!nativeFunc) {\n    return undefined;\n  }\n  return (...args) => {\n    if (!isAppRegistered) {\n      return Promise.reject(new Error('registerApp required.'));\n    }\n    return new Promise((resolve, reject) => {\n      nativeFunc.apply(null, [\n        ...args,\n        (error, result) => {\n          if (!error) {\n            return resolve(result);\n          }\n          if (typeof error === 'string') {\n            return reject(new Error(error));\n          }\n          reject(error);\n        },\n      ]);\n    });\n  };\n}\n\n/**\n * `addListener` inherits from `events` module\n * @method addListener\n * @param {String} eventName - the event name\n * @param {Function} trigger - the function when event is fired\n */\nexport const addListener = emitter.addListener.bind(emitter);\n\n/**\n * `once` inherits from `events` module\n * @method once\n * @param {String} eventName - the event name\n * @param {Function} trigger - the function when event is fired\n */\nexport const once = emitter.once.bind(emitter);\n\n/**\n * `removeAllListeners` inherits from `events` module\n * @method removeAllListeners\n * @param {String} eventName - the event name\n */\nexport const removeAllListeners = emitter.removeAllListeners.bind(emitter);\n\n/**\n * @method registerApp\n * @param {String} appid - the app id\n * @return {Promise}\n */\nexport const registerApp = wrapRegisterApp(WeChat.registerApp);\n\n// /**\n//  * @method registerAppWithDescription\n//  * @param {String} appid - the app id\n//  * @param {String} appdesc - the app description\n//  * @return {Promise}\n//  */\n// export const registerAppWithDescription = wrapRegisterApp(\n//   WeChat.registerAppWithDescription,\n// );\n\n/**\n * Return if the wechat app is installed in the device.\n * @method isWXAppInstalled\n * @return {Promise}\n */\nexport const isWXAppInstalled = wrapApi(WeChat.isWXAppInstalled);\n\n/**\n * Return if the wechat application supports the api\n * @method isWXAppSupportApi\n * @return {Promise}\n */\nexport const isWXAppSupportApi = wrapApi(WeChat.isWXAppSupportApi);\n\n/**\n * Get the wechat app installed url\n * @method getWXAppInstallUrl\n * @return {String} the wechat app installed url\n */\nexport const getWXAppInstallUrl = wrapApi(WeChat.getWXAppInstallUrl);\n\n/**\n * Get the wechat api version\n * @method getApiVersion\n * @return {String} the api version string\n */\nexport const getApiVersion = wrapApi(WeChat.getApiVersion);\n\n/**\n * Open wechat app\n * @method openWXApp\n * @return {Promise}\n */\nexport const openWXApp = wrapApi(WeChat.openWXApp);\n\n// wrap the APIs\nconst nativeShareToTimeline = wrapApi(WeChat.shareToTimeline);\nconst nativeLaunchMiniProgram = wrapApi(WeChat.launchMiniProgram);\nconst nativeShareToSession = wrapApi(WeChat.shareToSession);\nconst nativeShareToFavorite = wrapApi(WeChat.shareToFavorite);\nconst nativeSendAuthRequest = wrapApi(WeChat.sendAuthRequest);\nconst nativeShareText = wrapApi(WeChat.shareText);\nconst nativeShareImage = wrapApi(WeChat.shareImage);\nconst nativeShareLocalImage = wrapApi(WeChat.shareLocalImage);\nconst nativeShareMusic = wrapApi(WeChat.shareMusic);\nconst nativeShareVideo = wrapApi(WeChat.shareVideo);\nconst nativeShareWebpage = wrapApi(WeChat.shareWebpage);\nconst nativeShareMiniProgram = wrapApi(WeChat.shareMiniProgram);\nconst nativeSubscribeMessage = wrapApi(WeChat.subscribeMessage);\n\nconst nativeChooseInvoice = wrapApi(WeChat.chooseInvoice);\nconst nativeShareFile = wrapApi(WeChat.shareFile);\n\n/**\n * @method sendAuthRequest\n * @param {Array} scopes - the scopes for authentication.\n * @return {Promise}\n */\nexport function sendAuthRequest(scopes, state) {\n  return new Promise((resolve, reject) => {\n    WeChat.sendAuthRequest(scopes, state, () => {});\n    emitter.once('SendAuth.Resp', (resp) => {\n      if (resp.errCode === 0) {\n        resolve(resp);\n      } else {\n        reject(new WechatError(resp));\n      }\n    });\n  });\n}\n\n/**\n * Share text\n * @method shareText\n * @param {Object} data\n */\nexport function shareText(data) {\n  if (data && data.scene == null) {\n    data.scene = 0;\n  }\n  return new Promise((resolve, reject) => {\n    nativeShareText(data);\n    emitter.once('SendMessageToWX.Resp', (resp) => {\n      if (resp.errCode === 0) {\n        resolve(resp);\n      } else {\n        reject(new WechatError(resp));\n      }\n    });\n  });\n}\n\n/**\n * Choose Invoice\n * @method chooseInvoice\n * @param {Object} data\n */\nexport function chooseInvoice(data = {}) {\n  return new Promise((resolve, reject) => {\n    nativeChooseInvoice(data);\n    emitter.once('WXChooseInvoiceResp.Resp', (resp) => {\n      if (resp.errCode === 0) {\n        if (Platform.OS === 'android') {\n          const cardItemList = JSON.parse(resp.cardItemList);\n          resp.cards = cardItemList\n            ? cardItemList.map((item) => ({\n                cardId: item.card_id,\n                encryptCode: item.encrypt_code,\n              }))\n            : [];\n        }\n        resolve(resp);\n      } else {\n        reject(new WechatError(resp));\n      }\n    });\n  });\n}\n\n/**\n * Share File\n * @method shareFile\n * @param {Object} data\n */\nexport function shareFile(data) {\n  return new Promise((resolve, reject) => {\n    nativeShareFile(data);\n    emitter.once('SendMessageToWX.Resp', (resp) => {\n      if (resp.errCode === 0) {\n        resolve(resp);\n      } else {\n        reject(new WechatError(resp));\n      }\n    });\n  });\n}\n\n/**\n * Share image\n * @method shareImage\n * @param {Object} data\n */\nexport function shareImage(data) {\n  if (data && data.scene == null) {\n    data.scene = 0;\n  }\n  return new Promise((resolve, reject) => {\n    nativeShareImage(data);\n    emitter.once('SendMessageToWX.Resp', (resp) => {\n      if (resp.errCode === 0) {\n        resolve(resp);\n      } else {\n        reject(new WechatError(resp));\n      }\n    });\n  });\n}\n\n/**\n * Share local image\n * @method shareLocalImage\n * @param {Object} data\n */\nexport function shareLocalImage(data) {\n  if (data && data.scene == null) {\n    data.scene = 0;\n  }\n  return new Promise((resolve, reject) => {\n    nativeShareLocalImage(data);\n    emitter.once('SendMessageToWX.Resp', (resp) => {\n      if (resp.errCode === 0) {\n        resolve(resp);\n      } else {\n        reject(new WechatError(resp));\n      }\n    });\n  });\n}\n\n/**\n * Share music\n * @method shareMusic\n * @param {Object} data\n */\nexport function shareMusic(data) {\n  if (data && data.scene == null) {\n    data.scene = 0;\n  }\n  return new Promise((resolve, reject) => {\n    nativeShareMusic(data);\n    emitter.once('SendMessageToWX.Resp', (resp) => {\n      if (resp.errCode === 0) {\n        resolve(resp);\n      } else {\n        reject(new WechatError(resp));\n      }\n    });\n  });\n}\n\n/**\n * Share video\n * @method shareVideo\n * @param {Object} data\n */\nexport function shareVideo(data) {\n  if (data && data.scene == null) {\n    data.scene = 0;\n  }\n  return new Promise((resolve, reject) => {\n    nativeShareVideo(data);\n    emitter.once('SendMessageToWX.Resp', (resp) => {\n      if (resp.errCode === 0) {\n        resolve(resp);\n      } else {\n        reject(new WechatError(resp));\n      }\n    });\n  });\n}\n\n/**\n * Share webpage\n * @method shareWebpage\n * @param {Object} data\n */\nexport function shareWebpage(data) {\n  if (data && data.scene == null) {\n    data.scene = 0;\n  }\n  return new Promise((resolve, reject) => {\n    nativeShareWebpage(data);\n    emitter.once('SendMessageToWX.Resp', (resp) => {\n      if (resp.errCode === 0) {\n        resolve(resp);\n      } else {\n        reject(new WechatError(resp));\n      }\n    });\n  });\n}\n/**\n * Share miniProgram\n * @method shareMiniProgram\n * @param {Object} data\n */\nexport function shareMiniProgram(data) {\n  if (data && data.scene == null) {\n    data.scene = 0;\n  }\n  if (data && data.miniProgramType == null) {\n    data.miniProgramType = 0;\n  }\n  return new Promise((resolve, reject) => {\n    nativeShareMiniProgram(data);\n    emitter.once('SendMessageToWX.Resp', (resp) => {\n      if (resp.errCode === 0) {\n        resolve(resp);\n      } else {\n        reject(new WechatError(resp));\n      }\n    });\n  });\n}\n\n/**\n * 打开小程序\n * @method launchMini\n * @param\n * @param {String} userName - 拉起的小程序的username\n * @param {Integer} miniProgramType - 拉起小程序的类型. 0-正式版 1-开发版 2-体验版\n * @param {String} path - 拉起小程序页面的可带参路径，不填默认拉起小程序首页\n */\nexport function launchMiniProgram({ userName, miniProgramType = 0, path = '' }) {\n  return new Promise((resolve, reject) => {\n    if (miniProgramType !== 0 && miniProgramType !== 1 && miniProgramType !== 2) {\n      reject(\n        new WechatError({\n          errStr: '拉起小程序的类型不对，0-正式版 1-开发版 2-体验版',\n          errCode: -1,\n        }),\n      );\n      return;\n    }\n    nativeLaunchMiniProgram({ userName, miniProgramType, path });\n    emitter.once('WXLaunchMiniProgramReq.Resp', (resp) => {\n      if (resp.errCode === 0) {\n        resolve(resp);\n      } else {\n        reject(new WechatError(resp));\n      }\n    });\n  });\n}\n\n/**\n * 一次性订阅消息\n * @method shareVideo\n * @param {Object} data\n */\nexport function subscribeMessage(data) {\n  if (data && data.scene == null) {\n    data.scene = 0;\n  }\n  return new Promise((resolve, reject) => {\n    nativeSubscribeMessage(data);\n    emitter.once('WXSubscribeMsgReq.Resp', (resp) => {\n      if (resp.errCode === 0) {\n        resolve(resp);\n      } else {\n        reject(new WechatError(resp));\n      }\n    });\n  });\n}\n\n/**\n * Share something to favorite\n * @method shareToFavorite\n * @param {Object} data\n * @param {String} data.thumbImage - Thumb image of the message, which can be a uri or a resource id.\n * @param {String} data.type - Type of this message. Could be {news|text|imageUrl|imageFile|imageResource|video|audio|file}\n * @param {String} data.webpageUrl - Required if type equals news. The webpage link to share.\n * @param {String} data.imageUrl - Provide a remote image if type equals image.\n * @param {String} data.videoUrl - Provide a remote video if type equals video.\n * @param {String} data.musicUrl - Provide a remote music if type equals audio.\n * @param {String} data.filePath - Provide a local file if type equals file.\n * @param {String} data.fileExtension - Provide the file type if type equals file.\n */\nexport function shareToFavorite(data) {\n  return new Promise((resolve, reject) => {\n    nativeShareToFavorite(data);\n    emitter.once('SendMessageToWX.Resp', (resp) => {\n      if (resp.errCode === 0) {\n        resolve(resp);\n      } else {\n        reject(new WechatError(resp));\n      }\n    });\n  });\n}\n\n/**\n * wechat pay\n * @param {Object} data\n * @param {String} data.partnerId\n * @param {String} data.prepayId\n * @param {String} data.nonceStr\n * @param {String} data.timeStamp\n * @param {String} data.package\n * @param {String} data.sign\n * @returns {Promise}\n */\nexport function pay(data) {\n  function correct(actual, fixed) {\n    if (!data[fixed] && data[actual]) {\n      data[fixed] = data[actual];\n      delete data[actual];\n    }\n  }\n  correct('prepayid', 'prepayId');\n  correct('noncestr', 'nonceStr');\n  correct('partnerid', 'partnerId');\n  correct('timestamp', 'timeStamp');\n\n  // FIXME(94cstyles)\n  // Android requires the type of the timeStamp field to be a string\n  if (Platform.OS === 'android') data.timeStamp = String(data.timeStamp);\n\n  return new Promise((resolve, reject) => {\n    WeChat.pay(data, (result) => {\n      if (result) reject(result);\n    });\n    emitter.once('PayReq.Resp', (resp) => {\n      if (resp.errCode === 0) {\n        resolve(resp);\n      } else {\n        reject(new WechatError(resp));\n      }\n    });\n  });\n}\n\n/**\n * promises will reject with this error when API call finish with an errCode other than zero.\n */\nexport class WechatError extends Error {\n  constructor(resp) {\n    const message = resp.errStr || resp.errCode.toString();\n    super(message);\n    this.name = 'WechatError';\n    this.code = resp.errCode;\n\n    // avoid babel's limition about extending Error class\n    // https://github.com/babel/babel/issues/3083\n    if (typeof Object.setPrototypeOf === 'function') {\n      Object.setPrototypeOf(this, WechatError.prototype);\n    } else {\n      this.__proto__ = WechatError.prototype;\n    }\n  }\n}\n"]}